#데이터 프레임이란?
- 가장 많이 사용하는 데이터 형태
- 행과 열로 구성된 사각형 모양의 표<br>
열(컬럼, 변수): 속성을 나타냄, 세로로 나열<br>
행(Row, Case): 각 사람에 대한 정보, 가로로 나열, 무엇이든 하나의 단위가 하나의 행으로 구성될 수 있음. -> 사람, 도시 등 

#데이터가 크다<br>
행이 많다 -> 컴퓨터가 느려짐 -> 고사양 장비 구출<br>
열이 많다 -> 분석방법의 한계 -> 고급 분석 방법<br>

데이터 분석의 가치: 어떤 현상이 조건에 따라 달라진다는 사실을 발견할 때 생겨남.
	* 데이터가 아무리 많더라도 다양한 변수를 담고 있지 않으면 변수들 간의 관련성을 분석할 수 없기 때문에 의미 있는 정보를 찾아낼 수 없다. 
	* '빅'데이터가 아니라 '다양한' 데이터가 중요함
## 데이터 프레임 만들기
	1. data.frame() :데이터 프레임을 구성할 변수를 괄호 안에 쉽표로 나열하면 됨.
	* df_midterm <- data.frame(english, math) 

* mean(df_midterm$english) : df_midterm 의 english 로 평균 산출
	$는 데이터 프레임 안에 있는 변수를 지정할 때 사용함

#데이터 프레임 한 번에 만들기
df_midterm <- data.frame(english = c(90, 80, 60, 70),                        
			   math = c(50, 60, 100, 20),                        
			   class = c(1, 1, 2, 2)) 

##외부데이터 이용하기
1. 프로젝트 폴더에 외부파일(엑셀) 삽입.
2. readxl 패키지 설치하고 로드하기
-install.packages("readxl") 
-library(readxl)
3. read_excel("파일명.xlsx") 불러오기
	R에서는 파일명을 지정할 때 항상 앞 뒤에 따옴표를 넣는다.
* 프로젝트 폴더가 아닌 다른 폴더에 있는 엑셀 파일을 불러오려면 파일경로 지정
	df_exam <- read_excel("d:/easy_r/excel_exam.xlsx")
만약 첫 행부터 데이터가 시작되는 파일은 col_names = F 파라미터 설정. (F는 대문자!!)
df_exam_novar <- read_excel("excel_exam_novar.xlsx", col_names = F) 

#논리형 벡터
- 참과 거짓 중 하나로 구성됨.
- col_names = F의 F가 거짓의미
- 반드시 대문자 TRUE , FALSE로 입력, (T,F 입력가능.)

# 엑셀 파일에 시트가 여러개 있다면?
- sheet 파라미터 이용해 몇번째 시트 데이터 불러올지 지정가능
- 엑셀 파일의 세 번째 시트에 있는 데이터 불러오기 
- df_exam_sheet <- read_excel("excel_exam_sheet.xlsx", sheet = 3)

#CSV파일 
-엑셀뿐 아니라, SAS, SPSS 등 데이터 다루는 대부분의 프로그램에서 읽고 쓰기 가능한 범용 데이터 파일
- 값들이 쉼표로 구분되어 있는 형태
- 다양한 프로그램에서 지원, 엑셀에 비해 용량이 작음

#CSV파일 불러오기
1.R에 기본적으로 내장된 read.csv()이용
2.괄호안에 불러올 파일명 지정
3.첫번째 행에 변수명 없는 csv파일 불러올때는 header = F 파라미터 지정
4.문자가 들어 있는 파일을 불러올 때 stringsAsFactors = F 
-> factor타입이 아닌 문자 타입으로 불러오기 때문에 오류 발생없음

read_excel()은 col_names = F , read.csv()는 header = F
write.csv() 데이터 프레임을 csv파일로 저장
* write.csv(df_midterm, file = "df_midterm.csv")
* 저장할 데이터 프레임명 지정, file파라미터에 파일명 지정

* RData(.rda, .rdata)는 R전용 데이터 파일
			R에서 읽고 쓰는 속도가 빠르고 용량이 작다
R에서 분석작업을 할때 RData파일 이용, R을 사용하지 않는 사람과 파일을 주고받을때 CSV파일 이용.

rm() : 데이터 삭제.

##RData파일 활용하기
1. 데이터 프레임을 RData파일로 저장
	- save()를 이용해 .rda 파일로 저장. 
	- save(df_midterm, file = "df_midterm.rda")
2. RData파일 불러오기
	- rda파일을 불러올 때는  load()를 이용

read.csv() 나 read_excel()은 파일을 불러와 새 변수에 할당해야 사용가능
load()로 rda파일을 불러오면 저장할때 사용한 데이터 프레임이 자동으로 만들어지기 때문에 새 변수 할당 필요없음

-----------------------------------------------------------------------------------------
## 데이터 분석 기초!
#데이터 파악할 때 사용하는 6가지 함수
-head() : 데이터 앞부분 출력 -> 앞에서 6번째 행까지 출력 
	head(exam, 10) -> 앞에서부터 10행까지 출력
-tail() : 데이터 뒷부분 출력 -> 뒤에서 6행 출력
	tail(exam, 10)  -> 뒤에서부터 10 행까지 출력
-View(): 뷰어 창에서 데이터 확인 -> V는 대문자로 입력!!
-dim(): 데이터 차원 출력 -> 데이터 프레임이 몇행, 몇열로 되어있는지 알아볼 때 사용.
			-> 행, 열 로 나타남. ex) 20 5 학생20명, 5개 변수
-str(): 데이터 속성 출력 -> 모든 변수의 속성을 한 눈에 파악하고 싶을 때 사용
-summary(): 요약 통계량 출력
		-Min 최솟값 : 가장 작은 값
		-1st Qu 1사분위수 : 하위 25% 지점에 위치하는 값
		-Median 중앙값 : 중앙에 위치하는 값
		-Mean 평균 : 모든 값을 더해 값의 개수로 나눈 값
		-3rd Qu 3사분위수 : 하위 75%지점에 위치하는 값
		-Max 최댓값 : 가장 큰 값

* as.data.frame(): 데이터 속성을 데이터 프레임 형태로 바꾸는 함수
*ggplot2::mpg는 ggplot2에 들어 있는 mpg데이터를 지칭하는 코드

* 더블 콜론(::)을 이용하면 특정 패키지에 들어 있는 함수나 데이터를 지정할 수 있음
* chr(문자), num(소수점이 잇는 실수), int(소수점이 없는 정수)

##변수명 바꾸기
*dplyr: 데이터를 원하는 형태로 가공할 때 사용하는 패키지

## 데이터를 변형하는 작업을 할 때는 원본을 직접 사용하기보다 복사본을 만들어 사용하는 습관을 들이는게 좋음!!! 그래야 작업중에 오류가 발생하더라도 원 상태로 되돌릴 수 있고, 데이터를 비교하면서 변형되는 과정을 검토할 수 잇음.

#변수명 바꾸기
-  rename()에 ‘데이터 프 레임명, 새 변수명 = 기존 변수명’을 입력
- df_new <- rename(df_new, v2 = var2)  # var2 를 v2 로 수정 

*파생변수: 기존의 변수를 변형해 만든 변수
* hist() : 히스토그램 그래프 그리기
* 조건문 함수: 조건에 따라 서로 다른 값을 반환하는 함수
	- ifelse(조건, 조건맞을때, 조건 맞지 않을 때): 가장 많이 사용하는 조건문 함수
	ex) ifelse(mpg$total >= 20, "pass", "fail")
*table(): 빈도표, 데이터의 개수 나타낸 표
* qplot()은 값의 개수를 막대의 길이로 표현하는 기능, 막대그래프 생성
-----------------------------------------------------------------------------------------------------
## 데이터 가공하기
#데이터 전처리 : 분석에 적합하게 데이터를 가공하는 작업
(데이터 가공, 데이터 핸들링, 데이터 랭글링, 데이터 면징 => 데이터 전처리와 비슷한 의미)
*dplyr: 데이터 전처리 작업에 가장 많이 사용되는 패키지
-filter(): 행 추출 (원하는 데이터 추출)
-select(): 열(변수) 추출
-arrange(): 정렬 (오름차순) / arrange(desc( ) ) (내림차순)
-mutate(): 변수 추가
-summarise(): 통계치 산출
-group_by(): 집단별로 나누기
-left_join(): 데이터 합치기(열)
-bind_rows(): 데이터 합치기(행)

* exam 에서 class 가 1 인 경우만 추출해 출력 
- exam %>% filter(class == 1) 
dplyr 패키지는 %>% 기호를 이용해 함수들을 나열하는 방식으로 코드 작성
 - Ctrl + Shift + M => %>% (파이프 연산자)
* %in% 기호: 변수의 값이 지정한 조건 목록에 해당하는지 확인하는 기능
ex) 1,3,5반에 해당하면 추출 
	-exam %>% filter(class %in% c(1, 3, 5))  
 	-exam %>% filter(class == 1 | class == 3 | class == 5)
|논리 연산자| 기능|
|---|:---:|
`< `| 작다|
`<=` | 작거나 같다|
`>` |크다|
`>=` |  크거나 같다|
`==` | 같다|
`!=` |같지 않다|
`|` |또는|
`&` |그리고|
`%in%` |매칭 확인|

|산술 연산자 | 기능 |
|---|:---:|
`+`| 더하기|
`-` |빼기|
`*` |곱하기|
`/` | 나누기 |
`^` ,` **` | 제곱|
`%/%` | 나눗셈의 몫 |
`%%` |나눗셈의 나머지|

*select() : 데이터에 들어있는 수많은 변수 중 일부 변수만 추출
*변수 추출
	-exam %>% select(추출할 변수명)
*변수 제외
	-exam %>% select(-제외할 변수명)
#dplyr 패키지 함수는 %>%를 이용해 조합할 수 있다는 장점잇음
			변수명 앞에 데이터 프레임명을 반복해 입력하지 않기 때문에 코드가 간결해진다는 장점.

*class 가 1 인 행만 추출한 다음 english 추출 
	-exam %>% filter(class == 1) %>% select(english)

#집단별 요약하기
*exam %>% summarise(mean_math = mean(math))  -> math 평균 산출
*exam %>%   group_by(class)   -> class 별로 분리  
		%>% summarise(mean_math = mean(math))  -> math 평균 산출
 - group_by() , summarise() 조합하면 집단별 요약 통계량 산출 (여러 요약 통계량 산출 가능)

| 함수 | 의미 |
|---|:---:|
`mean()` | 평균 |
`sd()` | 표준편차 |
`sum()` | 합계 |
`median()` | 중앙값 |
`min()` | 최솟값 |
`max()` | 최댓값 |
`n()` | 빈도 |

##데이터 합치기
1.가로로 합치기
	- left_join(합칠 프레임명, 합칠 프레임명, by = "기준 변수")
	- by에 기준변수 지정할 때 변수명 앞뒤에 따옴표 입력!!
2. 세로로 합치기
	- bind_rows(합칠 프레임명, 합칠 프레임명)
	- 두 데이터의 변수명이 같아야함. 만약 다를경우 rename()을 이용해 동일하게 맞춰줌
